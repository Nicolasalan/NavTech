<launch>

  <env name="GAZEBO_MODEL_PATH" value="$GAZEBO_MODEL_PATH:$(find robot_description)/meshes/" />
<!--######################## argument list #################################-->

  <arg name="gui"         default="false"/>

<!--#################### generate urdf from xacro  ########################-->

  <param name="robot_description"
    command="$(find xacro)/xacro $(find robot_description)/model/robot.urdf.xacro" />

<!--#################### simulation #######################################-->

  <!-- start gazebo server -->
  <param name="/use_sim_time" value="true"/>
  <node name="gazebo" pkg="gazebo_ros" type="gzserver" output="screen"
	args="--verbose $(find robot_description)/world/gazebo.world" />

  <!-- start gazebo client -->
  <group if="$(arg gui)">
    <node name="gazebo_gui" pkg="gazebo_ros" type="gzclient" output="screen" />
  </group>

  <node name="spawn_robot" pkg="gazebo_ros" type="spawn_model"
	args="-param robot_description
	      -urdf
	      -x $(arg x)
	      -y $(arg y)
	      -Y $(arg yaw)
	      -model $(arg robot_name)">
  </node>

</launch>